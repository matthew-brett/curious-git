<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Curious git &#8212; Curious git</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="git remotes - working with other people, making backups" href="curious_remotes.html" />
    <link rel="prev" title="A curious tale" href="curious_journey.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Curious git</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="curious_intro.html">Learn git right for a long and happy life</a></li>
<li class="toctree-l1"><a class="reference internal" href="curious_journey.html">A curious tale</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Curious git</a></li>
<li class="toctree-l1"><a class="reference internal" href="curious_remotes.html">git remotes - working with other people, making backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="curious_details.html">Deeper inside git</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Curious git</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">Curious git</a></li>
<li class="toctree-l1"><a class="reference internal" href="np-versions/README.html">np-versions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="pdf_contents.html">The curious coder’s guide to git</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Curious git</a><ul>
<li><a class="reference internal" href="#basic-configuration">Basic configuration</a></li>
<li><a class="reference internal" href="#getting-help">Getting help</a></li>
<li><a class="reference internal" href="#initializing-the-repository-directory">Initializing the repository directory</a></li>
<li><a class="reference internal" href="#updating-terms-for-git">Updating terms for git</a></li>
<li><a class="reference internal" href="#git-add-put-stuff-into-the-staging-area"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> – put stuff into the staging area</a></li>
<li><a class="reference internal" href="#the-git-staging-area">The git staging area</a></li>
<li><a class="reference internal" href="#git-objects">Git objects</a></li>
<li><a class="reference internal" href="#hash-values-can-usually-be-abbreviated-to-seven-characters">Hash values can usually be abbreviated to seven characters</a></li>
<li><a class="reference internal" href="#git-status-showing-the-status-of-files-in-the-working-tree"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> – showing the status of files in the working tree</a></li>
<li><a class="reference internal" href="#staging-the-other-files-with-git-add">Staging the other files with git add</a></li>
<li><a class="reference internal" href="#git-commit-making-the-snapshot"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> – making the snapshot</a></li>
<li><a class="reference internal" href="#git-log-what-are-the-commits-so-far"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> – what are the commits so far?</a></li>
<li><a class="reference internal" href="#git-branch-which-branch-are-we-on"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> - which branch are we on?</a></li>
<li><a class="reference internal" href="#a-second-commit">A second commit</a></li>
<li><a class="reference internal" href="#git-diff-what-has-changed"><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> – what has changed?</a></li>
<li><a class="reference internal" href="#you-need-to-git-add-a-file-to-put-it-into-the-staging-area">You need to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> a file to put it into the staging area</a></li>
<li><a class="reference internal" href="#an-ordinary-day-in-gitworld">An ordinary day in gitworld</a></li>
<li><a class="reference internal" href="#commit-four">Commit four</a></li>
<li><a class="reference internal" href="#undoing-a-commit-with-git-reset">Undoing a commit with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code></a></li>
<li><a class="reference internal" href="#pointing-backwards-in-history">Pointing backwards in history</a></li>
<li><a class="reference internal" href="#a-new-fourth-commit">A new fourth commit</a></li>
<li><a class="reference internal" href="#the-fifth-commit">The fifth commit</a></li>
<li><a class="reference internal" href="#getting-a-file-from-a-previous-commit-git-checkout">Getting a file from a previous commit – <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code></a></li>
<li><a class="reference internal" href="#using-bookmarks-git-branch">Using bookmarks – <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code></a></li>
<li><a class="reference internal" href="#changing-the-current-branch-with-git-checkout">Changing the current branch with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code></a></li>
<li><a class="reference internal" href="#making-commits-on-branches">Making commits on branches</a></li>
<li><a class="reference internal" href="#merging-lines-of-development-with-git-merge">Merging lines of development with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code></a></li>
<li><a class="reference internal" href="#the-commit-parents-make-the-development-history-into-a-graph">The commit parents make the development history into a graph</a></li>
<li><a class="reference internal" href="#other-commands-you-need-to-know">Other commands you need to know</a></li>
<li><a class="reference internal" href="#git-are-you-ready">Git: are you ready?</a></li>
<li><a class="reference internal" href="#other-git-ish-things-to-read">Other git-ish things to read</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="curious_journey.html" title="Previous Chapter: A curious tale"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; A curious tale</span>
    </a>
  </li>
  <li>
    <a href="curious_remotes.html" title="Next Chapter: git remotes - working with other people, making backups"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">git remotes -... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/curious_git.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="curious-git">
<h1>Curious git<a class="headerlink" href="#curious-git" title="Permalink to this headline">¶</a></h1>
<p>In <a class="reference internal" href="curious_journey.html"><span class="doc">A curious tale</span></a>, you built your own content management system.  Now
you have done that, you know how git works – because it works in exactly
the same way as your own system.  You will recognize hashes for files,
directories and commits, commits linked by reference to their parents, the
staging area, the <code class="docutils literal notranslate"><span class="pre">objects</span></code> directory, and bookmarks (branches).</p>
<p>Armed with this <a class="reference external" href="http://rogerdudler.github.io/git-guide">deep</a> understanding, we retrace our steps to do the same
content management tasks in git.</p>
<div class="section" id="basic-configuration">
<h2>Basic configuration<a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h2>
<p>We need to tell git our name and email address before we start.</p>
<p>Git will use this information to fill in the author information in each
<strong>commit message</strong>, so we don’t have to type it out every time.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git config --global user.name <span class="s2">&quot;Matthew Brett&quot;</span>
$ git config --global user.email <span class="s2">&quot;matthew.brett@gmail.com&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--global</span></code> flag tells git to store this information in its default
configuration file for your user account.  On Unix (e.g. OSX and Linux) this
file is <code class="docutils literal notranslate"><span class="pre">.gitconfig</span></code> in your home directory.  Without the <code class="docutils literal notranslate"><span class="pre">--global</span></code> flag,
git only applies the configuration to the particular <strong>repository</strong> you are
working in.</p>
<p>Every time we make a commit, we need to type a commit message.  Git will open
our text editor for us to type the message, but first it needs to know what
text editor we prefer.  Set your own preferred text editor here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># gedit is a reasonable choice for Linux</span>
<span class="c1"># &quot;vi&quot; is the default.</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">core</span><span class="o">.</span><span class="n">editor</span> <span class="n">gedit</span>
</pre></div>
</div>
<p>We also turn on the use of color, which is very helpful in making the
output of git easier to read:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git config --global color.ui <span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-help">
<h2>Getting help<a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git <span class="nb">help</span>
usage: git <span class="o">[</span>--version<span class="o">]</span> <span class="o">[</span>--help<span class="o">]</span> <span class="o">[</span>-C &lt;path&gt;<span class="o">]</span> <span class="o">[</span>-c &lt;name&gt;<span class="o">=</span>&lt;value&gt;<span class="o">]</span>
           <span class="o">[</span>--exec-path<span class="o">[=</span>&lt;path&gt;<span class="o">]]</span> <span class="o">[</span>--html-path<span class="o">]</span> <span class="o">[</span>--man-path<span class="o">]</span> <span class="o">[</span>--info-path<span class="o">]</span>
           <span class="o">[</span>-p <span class="p">|</span> --paginate <span class="p">|</span> -P <span class="p">|</span> --no-pager<span class="o">]</span> <span class="o">[</span>--no-replace-objects<span class="o">]</span> <span class="o">[</span>--bare<span class="o">]</span>
           <span class="o">[</span>--git-dir<span class="o">=</span>&lt;path&gt;<span class="o">]</span> <span class="o">[</span>--work-tree<span class="o">=</span>&lt;path&gt;<span class="o">]</span> <span class="o">[</span>--namespace<span class="o">=</span>&lt;name&gt;<span class="o">]</span>
           &lt;command&gt; <span class="o">[</span>&lt;args&gt;<span class="o">]</span>

These are common Git commands used in various situations:

start a working area <span class="o">(</span>see also: git <span class="nb">help</span> tutorial<span class="o">)</span>
   clone     Clone a repository into a new directory
   init      Create an empty Git repository or reinitialize an existing one

work on the current change <span class="o">(</span>see also: git <span class="nb">help</span> everyday<span class="o">)</span>
   add       Add file contents to the index
   mv        Move or rename a file, a directory, or a symlink
   restore   Restore working tree files
   rm        Remove files from the working tree and from the index

examine the <span class="nb">history</span> and state <span class="o">(</span>see also: git <span class="nb">help</span> revisions<span class="o">)</span>
   bisect    Use binary search to find the commit that introduced a bug
   diff      Show changes between commits, commit and working tree, etc
   grep      Print lines matching a pattern
   log       Show commit logs
   show      Show various types of objects
   status    Show the working tree status

grow, mark and tweak your common <span class="nb">history</span>
   branch    List, create, or delete branches
   commit    Record changes to the repository
   merge     Join two or more development histories together
   rebase    Reapply commits on top of another base tip
   reset     Reset current HEAD to the specified state
   switch    Switch branches
   tag       Create, list, delete or verify a tag object signed with GPG

collaborate <span class="o">(</span>see also: git <span class="nb">help</span> workflows<span class="o">)</span>
   fetch     Download objects and refs from another repository
   pull      Fetch from and integrate with another repository or a <span class="nb">local</span> branch
   push      Update remote refs along with associated objects

<span class="s1">&#39;git help -a&#39;</span> and <span class="s1">&#39;git help -g&#39;</span> list available subcommands and some
concept guides. See <span class="s1">&#39;git help &lt;command&gt;&#39;</span> or <span class="s1">&#39;git help &lt;concept&gt;&#39;</span>
to <span class="nb">read</span> about a specific subcommand or concept.
See <span class="s1">&#39;git help git&#39;</span> <span class="k">for</span> an overview of the system.
</pre></div>
</div>
<p>Try <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">help</span> <span class="pre">add</span></code> for an example.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The git help pages are famously hard to read if you don’t know how git
works. One purpose of this tutorial is to explain git in such a way that
it will be easier to understand the help pages.</p>
</div>
</div>
<div class="section" id="initializing-the-repository-directory">
<h2>Initializing the repository directory<a class="headerlink" href="#initializing-the-repository-directory" title="Permalink to this headline">¶</a></h2>
<p>We first set this <code class="docutils literal notranslate"><span class="pre">nobel_prize</span></code> directory to be version controlled with git.
We start off the working tree with the original files for the paper:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I highly recommend you type along.  Why not download
<a class="reference download internal" download="" href="_downloads/591a72b60b1c3b4c865fcf00ee05afc3/nobel_prize.zip"><code class="xref download docutils literal notranslate"><span class="pre">nobel_prize.zip</span></code></a> and unzip the
files to make the same <code class="docutils literal notranslate"><span class="pre">nobel_prize</span></code> directory as I have here?</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nobel_prize
├── clever_analysis.py [618B]
├── expensive_data.csv [244K]
└── fancy_figure.png [183K]
</pre></div>
</div>
<p>To get started with git, create the git <strong>repository directory</strong> with <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">init</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> nobel_prize
$ git init
Initialized empty Git repository in /Users/mb312/dev_trees/curious-git/working/nobel_prize/.git/
</pre></div>
</div>
<p>What happened when we did <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code>? Just what we were expecting; we have a
new repository directory in <code class="docutils literal notranslate"><span class="pre">nobel_prize</span></code> called <code class="docutils literal notranslate"><span class="pre">.git</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.git
├── refs
│   ├── tags
│   └── heads
├── objects
│   ├── pack
│   └── info
├── info
│   └── exclude [240B]
├── hooks
│   (12 files)
├── HEAD [23B]
├── config [137B]
└── description [73B]
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">objects</span></code> directory looks familiar.  It has exactly the same purpose as
it did for your SAP system.  At the moment it contains a couple of empty
directories, because we have not added any objects yet.</p>
</div>
<div class="section" id="updating-terms-for-git">
<h2>Updating terms for git<a class="headerlink" href="#updating-terms-for-git" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Working directory</dt><dd><p>The directory containing the files you are working on.  In our case this
is <code class="docutils literal notranslate"><span class="pre">nobel_prize</span></code>.  It contains the <strong>repository directory</strong>, named
<code class="docutils literal notranslate"><span class="pre">.git</span></code>.</p>
</dd>
<dt>Repository directory</dt><dd><p>Directory containing all previous commits (snapshots) and git private
files for working with commits.  The directory has name <code class="docutils literal notranslate"><span class="pre">.git</span></code> by
default, and almost always in practice.</p>
</dd>
</dl>
</div>
<div class="section" id="git-add-put-stuff-into-the-staging-area">
<span id="git-add"></span><h2><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> – put stuff into the staging area<a class="headerlink" href="#git-add-put-stuff-into-the-staging-area" title="Permalink to this headline">¶</a></h2>
<p>In the next few sections, we will do our first commit (snapshot).</p>
<p>First we will put the files for the commit into the staging area.</p>
<p>The command to put files into the staging area is <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>.</p>
<p>To start, we show ourselves that the <strong>staging area</strong> is empty. We haven’t yet
discussed the git implementation of the staging area, but this command shows
us which files are in the staging area.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git ls-files --stage
</pre></div>
</div>
<p>As expected, there are no files in the staging area yet.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">ls-files</span></code> is a specialized command that you will not often need in
your daily git life.  I’m using it here to show you how git works.</p>
</div>
<p>Now we do our add:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add clever_analysis.py
</pre></div>
</div>
<p>Sure enough:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git ls-files --stage
<span class="m">100755</span> 6560135a5943c0509608fee6d900b775e3041197 <span class="m">0</span>	clever_analysis.py
</pre></div>
</div>
</div>
<div class="section" id="the-git-staging-area">
<h2>The git staging area<a class="headerlink" href="#the-git-staging-area" title="Permalink to this headline">¶</a></h2>
<p>It is time to think about what the staging area is, in git.  In your SAP
system, the staging area was a directory.  You also started off by using
directories to store commits (snapshots).  Later you found you could do
without the commit directories, because you could store the files in
<code class="docutils literal notranslate"><span class="pre">repo/objects</span></code> and the directory structure in <code class="docutils literal notranslate"><span class="pre">directory_listing.txt</span></code> text
files.</p>
<p>In git, the staging area is a single file called <code class="docutils literal notranslate"><span class="pre">.git/index</span></code>.  This file
contains a directory listing that is the equivalent of the <code class="docutils literal notranslate"><span class="pre">staging</span></code>
directory in SAP.  When we add a file to the staging area, git backs up the
file with its hash to <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>, and then changes the directory listing
inside <code class="docutils literal notranslate"><span class="pre">.git/index</span></code> to point to this backup copy.</p>
<p>If all that is true, then we now expect to see a) a new file <code class="docutils literal notranslate"><span class="pre">.git/index</span></code>
containing the directory listing and b) a new file in the <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>
directory corresponding to the hash for the <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> file. We
saw from the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">ls-files</span> <span class="pre">--stage</span></code> above that the hash for
<code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> is <code class="docutils literal notranslate"><span class="pre">6560135a5943c0509608fee6d900b775e3041197</span></code>.  So – do we see these files?</p>
<p>First – there is now a new file <code class="docutils literal notranslate"><span class="pre">.git/index</span></code> that was not present in our
first listing of the <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory above:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ls .git/index
.git/index
</pre></div>
</div>
<p>Second, there is a new directory and file in <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>objects
├── pack
├── info
└── 65
    └── 60135a5943c0509608fee6d900b775e3041197 [335B]
</pre></div>
</div>
<p>The directory and filename in <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code> come from the hash of
<code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code>.  The first two digits of the hash form the directory
name and the rest of the digits are the filename <a class="footnote-reference brackets" href="#git-object-dir" id="id1">3</a>. So, the
file <code class="docutils literal notranslate"><span class="pre">.git/objects/65/60135a5943c0509608fee6d900b775e3041197</span></code> is the copy of <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> that we added to
the staging area.</p>
<p>For extra points, what do you think would happen if we deleted the
<code class="docutils literal notranslate"><span class="pre">.git/index</span></code> file (answer <a class="footnote-reference brackets" href="#delete-git-index" id="id2">1</a>)?</p>
</div>
<div class="section" id="git-objects">
<h2>Git objects<a class="headerlink" href="#git-objects" title="Permalink to this headline">¶</a></h2>
<p>Git objects are nearly as simple as the objects you were writing in your SAP.
The hash is not the hash of the raw file, but the raw file prepended with a
short housekeeping string.  See <a class="reference internal" href="reading_git_objects.html"><span class="doc">Reading git objects</span></a> for details.</p>
<p>We can see the contents of objects with the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span> <span class="pre">-p</span></code>.  For
example, here are the contents of the backup we just made of
<code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p 6560135a5943c0509608fee6d900b775e3041197
<span class="c1"># The brain analysis script</span>
import numpy as np

import matplotlib.pyplot as plt

<span class="nv">FUDGE</span> <span class="o">=</span> <span class="m">42</span>

<span class="c1"># Load data from the brain</span>
<span class="nv">data</span> <span class="o">=</span> np.loadtxt<span class="o">(</span><span class="s1">&#39;expensive_data.csv&#39;</span>, <span class="nv">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">)</span>

<span class="c1"># First column is something from world, second is something from brain</span>
from_world, <span class="nv">from_brain</span> <span class="o">=</span> data.T

<span class="c1"># Process data</span>
<span class="nv">from_brain_processed</span> <span class="o">=</span> np.log<span class="o">(</span>from_brain<span class="o">)</span> * FUDGE * np.e ** np.pi

<span class="c1"># Make plot</span>
plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;r:&#39;</span><span class="o">)</span>
plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;bx&#39;</span><span class="o">)</span>
plt.xlabel<span class="o">(</span><span class="s1">&#39;Data from the outside world&#39;</span><span class="o">)</span>
plt.ylabel<span class="o">(</span><span class="s1">&#39;Data from inside the brain&#39;</span><span class="o">)</span>
plt.title<span class="o">(</span><span class="s1">&#39;Important finding&#39;</span><span class="o">)</span>
plt.savefig<span class="o">(</span><span class="s1">&#39;fancy_figure.png&#39;</span><span class="o">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I will use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span> <span class="pre">-p</span></code> to display the content of nearly raw git
objects, to show the simplicity of git’s internal model, but <code class="docutils literal notranslate"><span class="pre">cat-file</span></code>
is a specialized command that you won’t use much in daily work.</p>
</div>
<p>Just as we expected, it is the current contents of the
<code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">6560135a5943c0509608fee6d900b775e3041197</span></code> object is a hashed, stored raw file.  Because the object
is a stored file rather than a stored directory listing text file or commit
message text file, git calls this type of object a <strong>blob</strong> – for Binary
Large Object.  You can get the object <em>type</em> from the object hash with the
<code class="docutils literal notranslate"><span class="pre">-t</span></code> flag to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -t 6560135a5943c0509608fee6d900b775e3041197
blob
</pre></div>
</div>
</div>
<div class="section" id="hash-values-can-usually-be-abbreviated-to-seven-characters">
<h2>Hash values can usually be abbreviated to seven characters<a class="headerlink" href="#hash-values-can-usually-be-abbreviated-to-seven-characters" title="Permalink to this headline">¶</a></h2>
<p>We only need to give git enough hash digits for git to identify the object
uniquely.  7 digits is nearly always enough, as in:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p <span class="m">6560135</span>
<span class="c1"># The brain analysis script</span>
import numpy as np

import matplotlib.pyplot as plt

<span class="nv">FUDGE</span> <span class="o">=</span> <span class="m">42</span>

<span class="c1"># Load data from the brain</span>
<span class="nv">data</span> <span class="o">=</span> np.loadtxt<span class="o">(</span><span class="s1">&#39;expensive_data.csv&#39;</span>, <span class="nv">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">)</span>

<span class="c1"># First column is something from world, second is something from brain</span>
from_world, <span class="nv">from_brain</span> <span class="o">=</span> data.T

<span class="c1"># Process data</span>
<span class="nv">from_brain_processed</span> <span class="o">=</span> np.log<span class="o">(</span>from_brain<span class="o">)</span> * FUDGE * np.e ** np.pi

<span class="c1"># Make plot</span>
plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;r:&#39;</span><span class="o">)</span>
plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;bx&#39;</span><span class="o">)</span>
plt.xlabel<span class="o">(</span><span class="s1">&#39;Data from the outside world&#39;</span><span class="o">)</span>
plt.ylabel<span class="o">(</span><span class="s1">&#39;Data from inside the brain&#39;</span><span class="o">)</span>
plt.title<span class="o">(</span><span class="s1">&#39;Important finding&#39;</span><span class="o">)</span>
plt.savefig<span class="o">(</span><span class="s1">&#39;fancy_figure.png&#39;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="git-status-showing-the-status-of-files-in-the-working-tree">
<h2><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> – showing the status of files in the working tree<a class="headerlink" href="#git-status-showing-the-status-of-files-in-the-working-tree" title="Permalink to this headline">¶</a></h2>
<p>The working tree is the contents of the <code class="docutils literal notranslate"><span class="pre">nobel_prize</span></code> directory, excluding
the <code class="docutils literal notranslate"><span class="pre">.git</span></code> repository directory.</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> tells us about the relationship of the files in the working
tree to the repository and staging area.</p>
<p>We have done a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> on <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code>, and that added the file
to the staging area.  We can see that this happened with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master

No commits yet

Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
	new file:   clever_analysis.py

Untracked files:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to include in what will be committed<span class="o">)</span>
	expensive_data.csv
	fancy_figure.png
</pre></div>
</div>
<p>Sure enough, the output tells us that <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">file:</span> <span class="pre">clever_analysis.py</span></code> is in
the <code class="docutils literal notranslate"><span class="pre">changes</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">committed</span></code>.  It also tells us that the other two files in
the working directory are <code class="docutils literal notranslate"><span class="pre">untracked</span></code>.</p>
<p>An untracked file is a file with a filename that is not listed the staging
area directory listing. Until you run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> on an untracked file, git
will ignore these files and assume you don’t want to keep track of them.</p>
</div>
<div class="section" id="staging-the-other-files-with-git-add">
<h2>Staging the other files with git add<a class="headerlink" href="#staging-the-other-files-with-git-add" title="Permalink to this headline">¶</a></h2>
<p>We do want to keep track of the other files, so we stage them:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add fancy_figure.png
$ git add expensive_data.csv
$ git status
On branch master

No commits yet

Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
	new file:   clever_analysis.py
	new file:   expensive_data.csv
	new file:   fancy_figure.png
</pre></div>
</div>
<p>We have staged all three of our files.  We have three objects in
<code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>objects
├── pack
├── info
├── 7b
│   └── 37886351b3df2463fd29c87bc5184b637f0926 [119K]
├── 65
│   └── 60135a5943c0509608fee6d900b775e3041197 [335B]
└── 1e
    └── d447c15c125991b8a292bdb433aaf19998a3e9 [179K]
</pre></div>
</div>
</div>
<div class="section" id="git-commit-making-the-snapshot">
<h2><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> – making the snapshot<a class="headerlink" href="#git-commit-making-the-snapshot" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;First backup of my amazing idea&quot;</span>
<span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> 75206bc<span class="o">]</span> First backup of my amazing idea
 <span class="m">3</span> files changed, <span class="m">5023</span> insertions<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100755</span> clever_analysis.py
 create mode <span class="m">100644</span> expensive_data.csv
 create mode <span class="m">100644</span> fancy_figure.png
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the line above, I used the <code class="docutils literal notranslate"><span class="pre">-m</span></code> flag to specify a message at the
command line. If I had not done that, git would open the editor I
specified in the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span></code> step above and ask me to enter a message.
I’m using the <code class="docutils literal notranslate"><span class="pre">-m</span></code> flag so the commit command runs without interaction
in this tutorial, but in ordinary use, I virtually never use <code class="docutils literal notranslate"><span class="pre">-m</span></code>, and I
suggest you don’t either.  Using the editor for the commit message allows
you to write a more complete commit message, and gives feedback about the
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> of the commit to remind you what you are about to do.</p>
</div>
<p>Following the logic of your SAP system, we expect that the action of making
the commit will generate two new files in <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>, one for the
directory listing text file, and another for the commit message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>objects
├── pack
├── info
├── ff
│   └── c871b48a6b9df8dc4a13e8e5da99ccf2ce458d [150B]
├── 7b
│   └── 37886351b3df2463fd29c87bc5184b637f0926 [119K]
├── 75
│   └── 206bcb33ff9ad4f15f89b52cdf95bf666d67a8 [148B]
├── 65
│   └── 60135a5943c0509608fee6d900b775e3041197 [335B]
└── 1e
    └── d447c15c125991b8a292bdb433aaf19998a3e9 [179K]
</pre></div>
</div>
<p>Here is the contents of the commit message text file for the new commit.  Git
calls this a <strong>commit object</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
tree ffc871b48a6b9df8dc4a13e8e5da99ccf2ce458d
author Matthew Brett &lt;matthew.brett@gmail.com&gt; <span class="m">1333287013</span> +0100
committer Matthew Brett &lt;matthew.brett@gmail.com&gt; <span class="m">1333287013</span> +0100

First backup of my amazing idea
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="c1"># What type of git object is this?</span>
$ git cat-file -t 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
commit
</pre></div>
</div>
<p>As for SAP, the commit message file contains the hash for the directory tree
file (<code class="docutils literal notranslate"><span class="pre">tree</span></code>), the hash of the parent (<code class="docutils literal notranslate"><span class="pre">parent</span></code>) (but this commit has no
parents), the author, date and time, and the note.</p>
<p>Here’s the contents of the directory listing text file for the new commit.
Git calls this  a <strong>tree</strong> object.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p ffc871b48a6b9df8dc4a13e8e5da99ccf2ce458d
<span class="m">100755</span> blob 6560135a5943c0509608fee6d900b775e3041197	clever_analysis.py
<span class="m">100644</span> blob 7b37886351b3df2463fd29c87bc5184b637f0926	expensive_data.csv
<span class="m">100644</span> blob 1ed447c15c125991b8a292bdb433aaf19998a3e9	fancy_figure.png
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -t ffc871b48a6b9df8dc4a13e8e5da99ccf2ce458d
tree
</pre></div>
</div>
<p>Each line in the directory listing gives the file permissions, the type of the
entry in the directory (where “tree” means a sub-directory, and “blob” means a
file), the file hash, and the file name (see <a class="reference internal" href="git_object_types.html#git-object-types"><span class="std std-ref">Types of git objects</span></a>).</p>
</div>
<div class="section" id="git-log-what-are-the-commits-so-far">
<h2><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> – what are the commits so far?<a class="headerlink" href="#git-log-what-are-the-commits-so-far" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log
commit 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Sun Apr <span class="m">1</span> <span class="m">14</span>:30:13 <span class="m">2012</span> +0100

    First backup of my amazing idea
</pre></div>
</div>
<p>Notice that git log identifies each commit with its hash.  The hash is the
hash for the contents of the commit message. As we saw above, the hash for our
commit was <code class="docutils literal notranslate"><span class="pre">75206bcb33ff9ad4f15f89b52cdf95bf666d67a8</span></code>.</p>
<p>We can also ask to the see the parents of each commit in the log:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log --parents
commit 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Sun Apr <span class="m">1</span> <span class="m">14</span>:30:13 <span class="m">2012</span> +0100

    First backup of my amazing idea
</pre></div>
</div>
<p>Why are the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">--parents</span></code> the same in this
case? (answer <a class="footnote-reference brackets" href="#no-parents" id="id3">2</a>).</p>
</div>
<div class="section" id="git-branch-which-branch-are-we-on">
<h2><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> - which branch are we on?<a class="headerlink" href="#git-branch-which-branch-are-we-on" title="Permalink to this headline">¶</a></h2>
<p>Branches are bookmarks. They associate a name (like “my_bookmark” or “master”)
with a commit (such as <code class="docutils literal notranslate"><span class="pre">75206bcb33ff9ad4f15f89b52cdf95bf666d67a8</span></code>).</p>
<p>The default branch (bookmark) for git is called <code class="docutils literal notranslate"><span class="pre">master</span></code>. Git creates it
automatically when we do our first commit.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch
* master
</pre></div>
</div>
<p>Asking for more verbose detail shows us that the branch is pointing to a
particular commit (where the commit is given by a hash):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* master 75206bc First backup of my amazing idea
</pre></div>
</div>
<p>In this case git abbreviated the 40 character hash to the first 7 digits,
because these are enough to uniquely identify the commit.</p>
<p>A branch is nothing but a name that points to a commit.  In fact, git stores
branches as we did in SAP, as tiny text files, where the filename is the name
of the branch, and the contents is the hash of the commit that it points to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ls .git/refs/heads
master
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat .git/refs/heads/master
75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
</pre></div>
</div>
<p>We will soon see that, if we are working on a branch, and we do a commit, then
git will update the branch to point to the new commit.</p>
</div>
<div class="section" id="a-second-commit">
<h2>A second commit<a class="headerlink" href="#a-second-commit" title="Permalink to this headline">¶</a></h2>
<p>In our second commit, we will add the first draft of the Nobel prize paper.
As before, you can download this from
<a class="reference download internal" download="" href="_downloads/0ca9cde69ea4402290c460f32f2dca47/nobel_prize.md"><code class="xref download docutils literal notranslate"><span class="pre">nobel_prize.md</span></code></a>.  If you are
typing along, download <code class="docutils literal notranslate"><span class="pre">nobel_prize.md</span></code> to the <code class="docutils literal notranslate"><span class="pre">nobel_prize</span></code> directory.</p>
<p>The staging area does not have an entry for <code class="docutils literal notranslate"><span class="pre">nobel_prize.md</span></code>, so <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">status</span></code> identifies this file as <strong>untracked</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Untracked files:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to include in what will be committed<span class="o">)</span>
	nobel_prize.md

nothing added to commit but untracked files present <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> to track<span class="o">)</span>
</pre></div>
</div>
<p>We add the file to the staging area with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add nobel_prize.md
</pre></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> records this file being in the staging area, by listing it
under “changes to be committed”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
	new file:   nobel_prize.md
</pre></div>
</div>
<p>Finally we move the changes from the staging area into a commit with <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">commit</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Add first draft of paper&quot;</span>
<span class="o">[</span>master 7919d37<span class="o">]</span> Add first draft of paper
 <span class="m">1</span> file changed, <span class="m">29</span> insertions<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100644</span> nobel_prize.md
</pre></div>
</div>
<p>Git shows us the first 7 digits of the new commit hash in the output from
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> – these are <code class="docutils literal notranslate"><span class="pre">7919d37</span></code>.</p>
<p>Notice that the position of the current <code class="docutils literal notranslate"><span class="pre">master</span></code> branch is now this last
commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* master 7919d37 Add first draft of paper
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat .git/refs/heads/master
7919d37dda9044f00cf2dc0677eed18156f75404
</pre></div>
</div>
<p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> to look at our short history.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log
commit 7919d37dda9044f00cf2dc0677eed18156f75404
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Mon Apr <span class="m">2</span> <span class="m">18</span>:03:00 <span class="m">2012</span> +0100

    Add first draft of paper

commit 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Sun Apr <span class="m">1</span> <span class="m">14</span>:30:13 <span class="m">2012</span> +0100

    First backup of my amazing idea
</pre></div>
</div>
<p>We add the <code class="docutils literal notranslate"><span class="pre">--parents</span></code> flag to show that the second commit points back to
the first via its hash.  Git lists the parent hash after the commit hash:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log --parents
commit 7919d37dda9044f00cf2dc0677eed18156f75404 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Mon Apr <span class="m">2</span> <span class="m">18</span>:03:00 <span class="m">2012</span> +0100

    Add first draft of paper

commit 75206bcb33ff9ad4f15f89b52cdf95bf666d67a8
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Sun Apr <span class="m">1</span> <span class="m">14</span>:30:13 <span class="m">2012</span> +0100

    First backup of my amazing idea
</pre></div>
</div>
</div>
<div class="section" id="git-diff-what-has-changed">
<h2><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> – what has changed?<a class="headerlink" href="#git-diff-what-has-changed" title="Permalink to this headline">¶</a></h2>
<p>Our next commit will have edits to the <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> script.  We will
also refresh the figure with the result of running the script.</p>
<p>I open the <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> file in text editor and adjust the fudge
factor, add a new fudge factor, and apply the new factor to the data.</p>
<p>Now I’ve done these edits, I can ask <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> to show me how the files in
my working tree differ from the files in the staging area.</p>
<p>Remember, the files the staging area knows about so far are the files as of
the last commit.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git diff
diff --git a/clever_analysis.py b/clever_analysis.py
index <span class="m">6560135</span>..99cd07b <span class="m">100755</span>
--- a/clever_analysis.py
+++ b/clever_analysis.py
@@ -3,7 +3,8 @@ import numpy as np
 
 import matplotlib.pyplot as plt
 
-FUDGE <span class="o">=</span> <span class="m">42</span>
+FUDGE <span class="o">=</span> <span class="m">106</span>
+MORE_FUDGE <span class="o">=</span> <span class="m">2</span>.0
 
 <span class="c1"># Load data from the brain</span>
 <span class="nv">data</span> <span class="o">=</span> np.loadtxt<span class="o">(</span><span class="s1">&#39;expensive_data.csv&#39;</span>, <span class="nv">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">)</span>
@@ -13,6 +14,8 @@ from_world, <span class="nv">from_brain</span> <span class="o">=</span> data.T
 
 <span class="c1"># Process data</span>
 <span class="nv">from_brain_processed</span> <span class="o">=</span> np.log<span class="o">(</span>from_brain<span class="o">)</span> * FUDGE * np.e ** np.pi
+# Apply the new factor
+from_brain_processed <span class="o">=</span> from_brain_processed / MORE_FUDGE
 
 <span class="c1"># Make plot</span>
 plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;r:&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">-</span></code> at the beginning of the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> output means I have removed this
line.  A <code class="docutils literal notranslate"><span class="pre">+</span></code> at the beginning means I have added this line.  As you see I
have edited one line in this file, and added three more.</p>
<p>Open your text editor and edit <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code>.  See if you can
replicate my changes by editing the file, and checking with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>.</p>
<p>Now check the status of <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
	modified:   clever_analysis.py

no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="you-need-to-git-add-a-file-to-put-it-into-the-staging-area">
<h2>You need to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> a file to put it into the staging area<a class="headerlink" href="#you-need-to-git-add-a-file-to-put-it-into-the-staging-area" title="Permalink to this headline">¶</a></h2>
<p>Remember that git only commits stuff that you have added to the staging area.</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> tells us that <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> has been “modified”, and
that these changes are “not staged for commit”.</p>
<p>There is a version of <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> in the staging area, but it is
the version of the file as of the last commit, and so that version is
different from the version we have in the working tree.</p>
<p>If we try to do a commit, git will tell us there is nothing to commit, because
there is nothing new in the staging area:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git commit
On branch master
Changes not staged <span class="k">for</span> commit:
	modified:   clever_analysis.py

no changes added to commit
</pre></div>
</div>
<p>To stage this version of <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> we use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add clever_analysis.py
</pre></div>
</div>
<p>Git status now shows these changes as “Changes to be committed”.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
	modified:   clever_analysis.py
</pre></div>
</div>
<p>We can update the figure by running the <code class="docutils literal notranslate"><span class="pre">analysis_script.py</span></code> script.  The
script analyzes the data and writes the figure to the current directory.  If
you have Python installed, with the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> packages, you
can run the analysis yourself with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">clever_analysis</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If not, you can download a <a class="reference download internal" download="" href="_downloads/eb57230f5ed29eb9ea4a147e39b2d893/fancy_figure.png"><code class="xref download docutils literal notranslate"><span class="pre">version</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">figure</span> <span class="pre">I</span> <span class="pre">generated</span>
<span class="pre">earlier</span></code></a>.  After you have generated or
downloaded the figure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add fancy_figure.png
</pre></div>
</div>
<p>Do a final check with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>, then make the commit with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Add another fudge factor&quot;</span>
<span class="o">[</span>master 003c54a<span class="o">]</span> Add another fudge factor
 <span class="m">2</span> files changed, <span class="m">4</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">1</span> deletion<span class="o">(</span>-<span class="o">)</span>
 rewrite fancy_figure.png <span class="o">(</span><span class="m">96</span>%<span class="o">)</span>
</pre></div>
</div>
<p>The branch bookmark has moved again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* master 003c54a Add another fudge factor
</pre></div>
</div>
</div>
<div class="section" id="an-ordinary-day-in-gitworld">
<h2>An ordinary day in gitworld<a class="headerlink" href="#an-ordinary-day-in-gitworld" title="Permalink to this headline">¶</a></h2>
<p>We now have the main commands for daily work with git;</p>
<ul class="simple">
<li><p>Make some changes in the working tree;</p></li>
<li><p>Check what has changed with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>;</p></li>
<li><p>Review the changes with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>;</p></li>
<li><p>Add changes to the staging area with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>;</p></li>
<li><p>Make the commit with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>.</p></li>
</ul>
</div>
<div class="section" id="commit-four">
<h2>Commit four<a class="headerlink" href="#commit-four" title="Permalink to this headline">¶</a></h2>
<p>For our next commit, we will add some more changes to the analysis script and
figure, and add a new file, <code class="docutils literal notranslate"><span class="pre">references.bib</span></code>.</p>
<p>To follow along, first download <a class="reference download internal" download="" href="_downloads/62822a792fe65c573f13b97e02896450/references.bib"><code class="xref download docutils literal notranslate"><span class="pre">references.bib</span></code></a>.</p>
<p>Next, edit <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> again, to make these changes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git diff
diff --git a/clever_analysis.py b/clever_analysis.py
index 99cd07b..e5b2efa <span class="m">100755</span>
--- a/clever_analysis.py
+++ b/clever_analysis.py
@@ -5,6 +5,7 @@ import matplotlib.pyplot as plt
 
 <span class="nv">FUDGE</span> <span class="o">=</span> <span class="m">106</span>
 <span class="nv">MORE_FUDGE</span> <span class="o">=</span> <span class="m">2</span>.0
+NUDGE_FUDGE <span class="o">=</span> <span class="m">1</span>.25
 
 <span class="c1"># Load data from the brain</span>
 <span class="nv">data</span> <span class="o">=</span> np.loadtxt<span class="o">(</span><span class="s1">&#39;expensive_data.csv&#39;</span>, <span class="nv">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">)</span>
@@ -14,8 +15,8 @@ from_world, <span class="nv">from_brain</span> <span class="o">=</span> data.T
 
 <span class="c1"># Process data</span>
 <span class="nv">from_brain_processed</span> <span class="o">=</span> np.log<span class="o">(</span>from_brain<span class="o">)</span> * FUDGE * np.e ** np.pi
-# Apply the new factor
-from_brain_processed <span class="o">=</span> from_brain_processed / MORE_FUDGE
+# Apply the new factor<span class="o">(</span>s<span class="o">)</span>
+from_brain_processed <span class="o">=</span> from_brain_processed / MORE_FUDGE / NUDGE_FUDGE
 
 <span class="c1"># Make plot</span>
 plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;r:&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Finally regenerate <code class="docutils literal notranslate"><span class="pre">fancy_figure.png</span></code>, or download the updated copy
<a class="reference download internal" download="" href="_downloads/206fac9d9b841c3b5a6c58347bca902a/fancy_figure.png"><code class="xref download docutils literal notranslate"><span class="pre">from</span> <span class="pre">here</span></code></a>.</p>
<p>What will git status show now?</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
	modified:   clever_analysis.py
	modified:   fancy_figure.png

Untracked files:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to include in what will be committed<span class="o">)</span>
	references.bib

no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>The staging area does not list a file called <code class="docutils literal notranslate"><span class="pre">references.bib</span></code> so this file
is “untracked”.  The staging area does contain an entry for
<code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> and <code class="docutils literal notranslate"><span class="pre">fancy_figure.png</span></code>, so these files are tracked.
Git has checked the hashes for these files, and they are different from the
hashes in the staging area, so git knows these files have changed, compared to
the versions listed in the staging area.</p>
<p>Before we add our changes, we confirm that they are as we expect with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git diff
diff --git a/clever_analysis.py b/clever_analysis.py
index 99cd07b..e5b2efa <span class="m">100755</span>
--- a/clever_analysis.py
+++ b/clever_analysis.py
@@ -5,6 +5,7 @@ import matplotlib.pyplot as plt
 
 <span class="nv">FUDGE</span> <span class="o">=</span> <span class="m">106</span>
 <span class="nv">MORE_FUDGE</span> <span class="o">=</span> <span class="m">2</span>.0
+NUDGE_FUDGE <span class="o">=</span> <span class="m">1</span>.25
 
 <span class="c1"># Load data from the brain</span>
 <span class="nv">data</span> <span class="o">=</span> np.loadtxt<span class="o">(</span><span class="s1">&#39;expensive_data.csv&#39;</span>, <span class="nv">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">)</span>
@@ -14,8 +15,8 @@ from_world, <span class="nv">from_brain</span> <span class="o">=</span> data.T
 
 <span class="c1"># Process data</span>
 <span class="nv">from_brain_processed</span> <span class="o">=</span> np.log<span class="o">(</span>from_brain<span class="o">)</span> * FUDGE * np.e ** np.pi
-# Apply the new factor
-from_brain_processed <span class="o">=</span> from_brain_processed / MORE_FUDGE
+# Apply the new factor<span class="o">(</span>s<span class="o">)</span>
+from_brain_processed <span class="o">=</span> from_brain_processed / MORE_FUDGE / NUDGE_FUDGE
 
 <span class="c1"># Make plot</span>
 plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;r:&#39;</span><span class="o">)</span>
diff --git a/fancy_figure.png b/fancy_figure.png
index 81fc437..d1f40df <span class="m">100644</span>
Binary files a/fancy_figure.png and b/fancy_figure.png differ
</pre></div>
</div>
<p>Notice that git does not try and show the line-by-line differences between the
old and new figures, guessing correctly that this is a binary and not a text
file.</p>
<p>Now we have reviewed the changes, we add them to the staging area and commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add references.bib
$ git add clever_analysis.py
$ git add fancy_figure.png
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Change analysis and add references&quot;</span>
<span class="o">[</span>master 2d9e1df<span class="o">]</span> Change analysis and add references
 <span class="m">3</span> files changed, <span class="m">13</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">2</span> deletions<span class="o">(</span>-<span class="o">)</span>
 rewrite fancy_figure.png <span class="o">(</span><span class="m">89</span>%<span class="o">)</span>
 create mode <span class="m">100644</span> references.bib
</pre></div>
</div>
<p>The branch bookmark has moved to point to the new commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* master 2d9e1df Change analysis and add references
</pre></div>
</div>
</div>
<div class="section" id="undoing-a-commit-with-git-reset">
<h2>Undoing a commit with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code><a class="headerlink" href="#undoing-a-commit-with-git-reset" title="Permalink to this headline">¶</a></h2>
<p>As you found in the SAP story, this last commit doesn’t look quite right,
because the commit message refers to two different types of changes.  With
more git experience, you will likely find that you like to break your changes
into commits where the changes have a particular theme or purpose.  This makes
it easier to see what happened when you look over the history and the commit
messages with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>.</p>
<p>So, as in the SAP story, you decide to undo the last commit, and replace it
with two commits:</p>
<ul class="simple">
<li><p>One commit to add the changes to the script and figure;</p></li>
<li><p>Another commit on top of the first, to add the references file.</p></li>
</ul>
<p>In the SAP story, you had to delete a snapshot directory manually, and reset
the staging area directory to have the contents of the previous commit.  In
git, all we have to do is reset the current <code class="docutils literal notranslate"><span class="pre">master</span></code> branch bookmark to
point to the previous commit.  By default, git will also reset the staging
area for us.  The command to move the branch bookmark is <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code>.</p>
</div>
<div class="section" id="pointing-backwards-in-history">
<h2>Pointing backwards in history<a class="headerlink" href="#pointing-backwards-in-history" title="Permalink to this headline">¶</a></h2>
<p>The commit that we want the branch to point to is the previous commit in our
commit history.  We can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> to see that this commit has hash
<code class="docutils literal notranslate"><span class="pre">003c54a</span></code>.  So, we could do our reset with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code>
<code class="docutils literal notranslate"><span class="pre">003c54a</span></code>.  There is a simpler and more readable way to write this
common idea, of one commit back in history, and that is to add <code class="docutils literal notranslate"><span class="pre">~1</span></code> to a
reference.  For example, to refer to the commit that is one step back in the
history from the commit pointed to by the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch, you can write
<code class="docutils literal notranslate"><span class="pre">master~1</span></code>.  Because <code class="docutils literal notranslate"><span class="pre">master</span></code> points to commit <code class="docutils literal notranslate"><span class="pre">2d9e1df</span></code>, you could
also append the <code class="docutils literal notranslate"><span class="pre">~1</span></code> to <code class="docutils literal notranslate"><span class="pre">2d9e1df</span></code>.  You can imagine that <code class="docutils literal notranslate"><span class="pre">master~2</span></code>
will point two steps back in the commit history, and so on.</p>
<p>So, a readable reset command for our purpose is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git reset master~1
Unstaged changes after reset:
M	clever_analysis.py
M	fancy_figure.png
</pre></div>
</div>
<p>Notice that the branch pointer now points to the previous commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* master 003c54a Add another fudge factor
</pre></div>
</div>
<p>Remember in SAP that your procedure for breaking up the snapshot was to 1)
delete the old snapshot and 2) reset the staging area to reflect the previous
commit.  After you did this, the working tree contains your changes, but the
staging area does not.  You could make your new commits in the usual way, by
adding to the staging area, and doing the commits.</p>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code> has done the same thing.  It has reset the staging
area to the state as of the older commit, but it has left the working tree
alone.  That means that <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> will show us the changes in the working
tree compared to the commit we have just reset to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
	modified:   clever_analysis.py
	modified:   fancy_figure.png

Untracked files:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to include in what will be committed<span class="o">)</span>
	references.bib

no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>We have the changes from our original fourth commit in our working tree, but
we have not staged them.  We are ready to make our new separate commits.</p>
</div>
<div class="section" id="a-new-fourth-commit">
<h2>A new fourth commit<a class="headerlink" href="#a-new-fourth-commit" title="Permalink to this headline">¶</a></h2>
<p>As we planned, we make a commit by adding only the changes from the script and
figure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add clever_analysis.py
$ git add fancy_figure.png
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Change parameters of analysis&quot;</span>
<span class="o">[</span>master d0ef727<span class="o">]</span> Change parameters of analysis
 <span class="m">2</span> files changed, <span class="m">3</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">2</span> deletions<span class="o">(</span>-<span class="o">)</span>
 rewrite fancy_figure.png <span class="o">(</span><span class="m">89</span>%<span class="o">)</span>
</pre></div>
</div>
<p>Notice that git status now tells us that we still have untracked (and
therefore not staged) changes in our working tree:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Untracked files:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to include in what will be committed<span class="o">)</span>
	references.bib

nothing added to commit but untracked files present <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> to track<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-fifth-commit">
<h2>The fifth commit<a class="headerlink" href="#the-fifth-commit" title="Permalink to this headline">¶</a></h2>
<p>To finish our work splitting the fourth commit into two, we add and commit the
<code class="docutils literal notranslate"><span class="pre">references.bib</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add references.bib
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Add references&quot;</span>
<span class="o">[</span>master c3f19b2<span class="o">]</span> Add references
 <span class="m">1</span> file changed, <span class="m">10</span> insertions<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100644</span> references.bib
</pre></div>
</div>
</div>
<div class="section" id="getting-a-file-from-a-previous-commit-git-checkout">
<h2>Getting a file from a previous commit – <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code><a class="headerlink" href="#getting-a-file-from-a-previous-commit-git-checkout" title="Permalink to this headline">¶</a></h2>
<p>In the SAP story, we found that the first version of the analysis script was
correct, and we made a new commit after restoring this version from the first
snapshot.</p>
<p>As you can imagine, git allows us to do that too.  The command to do this is
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code></p>
<p>If you have a look at <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">--help</span></code> you will see that git checkout
has two roles, described in the help as “Checkout a branch or paths to the
working tree”.  We will see checking out a branch later, but here we are using
checkout in its second role, to restore files to the working tree.</p>
<p>We do this by telling git checkout which version we want, and what file we
want.  We want the version of <code class="docutils literal notranslate"><span class="pre">clever_analysis.py</span></code> as of the first commit.
To find the first commit, we can use git log.  To make git log a bit less
verbose, I’ve added the <code class="docutils literal notranslate"><span class="pre">--oneline</span></code> flag, to print out one line per commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log --oneline
c3f19b2 Add references
d0ef727 Change parameters of analysis
003c54a Add another fudge factor
7919d37 Add first draft of paper
75206bc First backup of my amazing idea
</pre></div>
</div>
<p>Now we have the abbreviated commit hash for the first commit, we can checkout
that version to the working tree:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git checkout 75206bc clever_analysis.py
Updated <span class="m">1</span> path from ffc871b
</pre></div>
</div>
<p>We also want the previous version of the figure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git checkout 75206bc fancy_figure.png
Updated <span class="m">1</span> path from ffc871b
</pre></div>
</div>
<p>Notice that the checkout also added the files to the staging area:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
	modified:   clever_analysis.py
	modified:   fancy_figure.png
</pre></div>
</div>
<p>We are ready for our sixth commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Revert to original script &amp; figure&quot;</span>
<span class="o">[</span>master 677c9a6<span class="o">]</span> Revert to original script <span class="p">&amp;</span> figure
 <span class="m">2</span> files changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>, <span class="m">5</span> deletions<span class="o">(</span>-<span class="o">)</span>
 rewrite fancy_figure.png <span class="o">(</span><span class="m">97</span>%<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-bookmarks-git-branch">
<h2>Using bookmarks – <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code><a class="headerlink" href="#using-bookmarks-git-branch" title="Permalink to this headline">¶</a></h2>
<p>We are at the stage in the SAP story where Josephine goes away to the
conference.</p>
<p>Let us pretend that we are Josephine, and that we have taken a copy of the
<cite>nobel_prize</cite> directory to the conference.  The copy includes the <code class="docutils literal notranslate"><span class="pre">.git</span></code>
subdirectory, containing the git repository.</p>
<p>Now we (as Josephine) start doing some work.  We don’t want to change the
previous bookmark, which is <code class="docutils literal notranslate"><span class="pre">master</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* master 677c9a6 Revert to original script <span class="p">&amp;</span> figure
</pre></div>
</div>
<p>We would like to use our own bookmark, so we can make changes without
affecting anyone else.  To do this we use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> with arguments:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch josephines-branch master
</pre></div>
</div>
<p>The first argument is the name of the branch we want to create.  The second is
the commit at which the branch should start.  Now we have a new branch, that
currently points to the same commit as <code class="docutils literal notranslate"><span class="pre">master</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
  josephines-branch 677c9a6 Revert to original script <span class="p">&amp;</span> figure
* master            677c9a6 Revert to original script <span class="p">&amp;</span> figure
</pre></div>
</div>
<p>The new branch is nothing but a text file pointing to the commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat .git/refs/heads/josephines-branch
677c9a6ac3004e5d84d9739751a89867e09238f4
</pre></div>
</div>
<p>Now we have two branches, git needs to know which branch we are working on.
The asterisk next to <code class="docutils literal notranslate"><span class="pre">master</span></code> in the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span></code> means that we
are working on <code class="docutils literal notranslate"><span class="pre">master</span></code> at the moment.  If we make another commit, it will
update the <code class="docutils literal notranslate"><span class="pre">master</span></code> bookmark.</p>
<p>Git stores the current branch in the file <code class="docutils literal notranslate"><span class="pre">.git/HEAD</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat .git/HEAD
ref: refs/heads/master
</pre></div>
</div>
<p>Git commands often allow you to write <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> meaning “the branch or commit
you are currently working on”.  For example, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">HEAD</span></code> means “show the
log starting at the branch or commit you are currently working on”.  In fact,
this is also the default behavior of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>.</p>
<p>We now want to make <code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code> current, so any new commits will
update <code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code> instead of <code class="docutils literal notranslate"><span class="pre">master</span></code>.</p>
</div>
<div class="section" id="changing-the-current-branch-with-git-checkout">
<h2>Changing the current branch with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code><a class="headerlink" href="#changing-the-current-branch-with-git-checkout" title="Permalink to this headline">¶</a></h2>
<p>We previously saw that <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">&lt;commit&gt;</span> <span class="pre">&lt;filename&gt;</span></code> will get the
file <code class="docutils literal notranslate"><span class="pre">&lt;filename&gt;</span></code> as of commit <code class="docutils literal notranslate"><span class="pre">&lt;commit&gt;</span></code>, and restore it to the working
tree.  This was the second of the two uses of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code>.  We now come
to the first and most common use of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span></code>, which is to:</p>
<ul class="simple">
<li><p>change the current branch to a given branch or commit;</p></li>
<li><p>restore the working tree and staging area to the file versions from the
given commit.</p></li>
</ul>
<p>We are about to do <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">josephines-branch</span></code>.  When we do this, we
are only going to see the first of these two effects, because <code class="docutils literal notranslate"><span class="pre">master</span></code> and
<code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code> point to the same commit, and so have the same file
contents:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git checkout josephines-branch
Switched to branch <span class="s1">&#39;josephines-branch&#39;</span>
</pre></div>
</div>
<p>The asterisk has now moved to <code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* josephines-branch 677c9a6 Revert to original script <span class="p">&amp;</span> figure
  master            677c9a6 Revert to original script <span class="p">&amp;</span> figure
</pre></div>
</div>
<p>This is because the file <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> now points to <code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat .git/HEAD
ref: refs/heads/josephines-branch
</pre></div>
</div>
<p>If we do a commit, git will update <code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code>, not <code class="docutils literal notranslate"><span class="pre">master</span></code>.</p>
</div>
<div class="section" id="making-commits-on-branches">
<h2>Making commits on branches<a class="headerlink" href="#making-commits-on-branches" title="Permalink to this headline">¶</a></h2>
<p>Josephine did some edits to the paper.  If you are typing along, make these
changes to <code class="docutils literal notranslate"><span class="pre">nobel_prize.md</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git diff
diff --git a/nobel_prize.md b/nobel_prize.md
index 3ef5df2..19fd4c5 100644
--- a/nobel_prize.md
+++ b/nobel_prize.md
@@ -5,6 +5,12 @@
 The brain thinks in straight lines once you do some poorly-motivated
 corrections on some brain recordings.
 
+Other people have done brain recordings and claimed that they were
+interesting, but they are not as interesting as our recordings.
+
+In our previous work, we have done some other brain recordings, that were also
+interesting, but in a different way.
+
 == Methods
 
 We took some recordings of someone&#39;s brain while we showed them stuff
</pre></div>
</div>
<p>As usual, we add the file to the staging area, and check the status of the
working tree:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add nobel_prize.md
$ git status
On branch josephines-branch
Changes to be committed:
  <span class="o">(</span>use <span class="s2">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
	modified:   nobel_prize.md
</pre></div>
</div>
<p>Finally we make the commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;Expand the introduction&quot;</span>
<span class="o">[</span>josephines-branch 0a5a1b9<span class="o">]</span> Expand the introduction
 <span class="m">1</span> file changed, <span class="m">6</span> insertions<span class="o">(</span>+<span class="o">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">master</span></code> branch has not changed, but <code class="docutils literal notranslate"><span class="pre">josephines-branch</span></code> changed to
point to the new commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
* josephines-branch 0a5a1b9 Expand the introduction
  master            677c9a6 Revert to original script <span class="p">&amp;</span> figure
</pre></div>
</div>
<p>Now we go back to being ourselves, working in the lab.  We change back to the
<code class="docutils literal notranslate"><span class="pre">master</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git checkout master
Switched to branch <span class="s1">&#39;master&#39;</span>
</pre></div>
</div>
<p>The asterisk now points at <code class="docutils literal notranslate"><span class="pre">master</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
  josephines-branch 0a5a1b9 Expand the introduction
* master            677c9a6 Revert to original script <span class="p">&amp;</span> figure
</pre></div>
</div>
<p>If you look at the contents of <code class="docutils literal notranslate"><span class="pre">nobel_prize.md</span></code> in the working directory,
you will see that we are back to the contents before Josephine’s changes.
This is because <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span></code> reverted the files to their state as
of the last commit on the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p>
<p>Now we make our own changes to the script and figure. Here are the changes to
the script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git diff
diff --git a/clever_analysis.py b/clever_analysis.py
index <span class="m">6560135</span>..cf163af <span class="m">100755</span>
--- a/clever_analysis.py
+++ b/clever_analysis.py
@@ -4,6 +4,7 @@ import numpy as np
 import matplotlib.pyplot as plt
 
 <span class="nv">FUDGE</span> <span class="o">=</span> <span class="m">42</span>
+HOT_FUDGE <span class="o">=</span> <span class="m">1</span>.707
 
 <span class="c1"># Load data from the brain</span>
 <span class="nv">data</span> <span class="o">=</span> np.loadtxt<span class="o">(</span><span class="s1">&#39;expensive_data.csv&#39;</span>, <span class="nv">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="o">)</span>
@@ -13,6 +14,7 @@ from_world, <span class="nv">from_brain</span> <span class="o">=</span> data.T
 
 <span class="c1"># Process data</span>
 <span class="nv">from_brain_processed</span> <span class="o">=</span> np.log<span class="o">(</span>from_brain<span class="o">)</span> * FUDGE * np.e ** np.pi
+from_brain_processed <span class="o">=</span> from_brain_processed / HOT_FUDGE
 
 <span class="c1"># Make plot</span>
 plt.plot<span class="o">(</span>from_world, from_brain_processed, <span class="s1">&#39;r:&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>If you are typing along, then you will also want to regenerate the figure with
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">clever_analysis.py</span></code> or <a class="reference download internal" download="" href="_downloads/5d85767fcdab94802f8ae5a832357d9a/fancy_figure.png"><code class="xref download docutils literal notranslate"><span class="pre">download</span> <span class="pre">the</span> <span class="pre">new</span> <span class="pre">version</span></code></a>.</p>
<p>This gives:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git status
On branch master
Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
	modified:   clever_analysis.py
	modified:   fancy_figure.png

no changes added to commit <span class="o">(</span>use <span class="s2">&quot;git add&quot;</span> and/or <span class="s2">&quot;git commit -a&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>As usual, we add the files and do the commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git add clever_analysis.py
$ git add fancy_figure.png
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>desktop<span class="o">]</span>$ git commit -m <span class="s2">&quot;More fun with fudge&quot;</span>
<span class="o">[</span>master 7598e4e<span class="o">]</span> More fun with fudge
 <span class="m">2</span> files changed, <span class="m">2</span> insertions<span class="o">(</span>+<span class="o">)</span>
 rewrite fancy_figure.png <span class="o">(</span><span class="m">96</span>%<span class="o">)</span>
</pre></div>
</div>
<p>Because <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> currently current points to <code class="docutils literal notranslate"><span class="pre">master</span></code>, git updated the
<code class="docutils literal notranslate"><span class="pre">master</span></code> branch with the new commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git branch -v
  josephines-branch 0a5a1b9 Expand the introduction
* master            7598e4e More fun with fudge
</pre></div>
</div>
</div>
<div class="section" id="merging-lines-of-development-with-git-merge">
<h2>Merging lines of development with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code><a class="headerlink" href="#merging-lines-of-development-with-git-merge" title="Permalink to this headline">¶</a></h2>
<p>We next want to get Josephine’s changes into the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.</p>
<p>We do this with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git merge josephines-branch
Merge made by the <span class="s1">&#39;recursive&#39;</span> strategy.
 nobel_prize.md <span class="p">|</span> <span class="m">6</span> ++++++
 <span class="m">1</span> file changed, <span class="m">6</span> insertions<span class="o">(</span>+<span class="o">)</span>
</pre></div>
</div>
<p>This commit has the changes we just made to the script and figure, and the
changes the Josephine made to the paper.</p>
<p>The commit has two parents, which are the two commits from which we merged:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log --oneline --parents
5ccf190 7598e4e 0a5a1b9 Merge branch <span class="s1">&#39;josephines-branch&#39;</span>
0a5a1b9 677c9a6 Expand the introduction
7598e4e 677c9a6 More fun with fudge
677c9a6 c3f19b2 Revert to original script <span class="p">&amp;</span> figure
c3f19b2 d0ef727 Add references
d0ef727 003c54a Change parameters of analysis
003c54a 7919d37 Add another fudge factor
7919d37 75206bc Add first draft of paper
75206bc First backup of my amazing idea
</pre></div>
</div>
</div>
<div class="section" id="the-commit-parents-make-the-development-history-into-a-graph">
<h2>The commit parents make the development history into a graph<a class="headerlink" href="#the-commit-parents-make-the-development-history-into-a-graph" title="Permalink to this headline">¶</a></h2>
<p>As you saw in your SAP system, we can think of the commits as nodes in a
graph.  Each commit stores the identity of its parent commit(s).  The pointers
from each commit back to its parent(s) link the commits (nodes) to form edges.</p>
<p>It is common to see a git history shown as a graph, and it is often useful to
think of this graph when we are working with a git repository.</p>
<p>There are a lot of graphical tools to show the git history as a graph, but
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> has a useful flag called <code class="docutils literal notranslate"><span class="pre">--graph</span></code> which shows the commits as a
graph using text characters:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log --oneline --graph
*   5ccf190 Merge branch <span class="s1">&#39;josephines-branch&#39;</span>
<span class="p">|</span><span class="se">\ </span> 
<span class="p">|</span> * 0a5a1b9 Expand the introduction
* <span class="p">|</span> 7598e4e More fun with fudge
<span class="p">|</span>/  
* 677c9a6 Revert to original script <span class="p">&amp;</span> figure
* c3f19b2 Add references
* d0ef727 Change parameters of analysis
* 003c54a Add another fudge factor
* 7919d37 Add first draft of paper
* 75206bc First backup of my amazing idea
</pre></div>
</div>
<p>This kind of display is so useful that many of us have a shortcut to this
command, that we use instead of the standard git log.  You can make customized
shortcuts to git commands by setting <code class="docutils literal notranslate"><span class="pre">alias</span></code> entries using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span></code>.
For example, you may want to set up an alias like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git config --global alias.slog <span class="s2">&quot;log --oneline --graph&quot;</span>
</pre></div>
</div>
<p>Now you can use the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">slog</span></code> to mean <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">--oneline</span>
<span class="pre">--graph</span></code>.  Because of the <code class="docutils literal notranslate"><span class="pre">--global</span></code> flag, this command sets up the
<code class="docutils literal notranslate"><span class="pre">slog</span></code> alias as the default for your user account, so you can use <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">slog</span></code> whenever you are using git as this user on this computer.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git slog
*   5ccf190 Merge branch <span class="s1">&#39;josephines-branch&#39;</span>
<span class="p">|</span><span class="se">\ </span> 
<span class="p">|</span> * 0a5a1b9 Expand the introduction
* <span class="p">|</span> 7598e4e More fun with fudge
<span class="p">|</span>/  
* 677c9a6 Revert to original script <span class="p">&amp;</span> figure
* c3f19b2 Add references
* d0ef727 Change parameters of analysis
* 003c54a Add another fudge factor
* 7919d37 Add first draft of paper
* 75206bc First backup of my amazing idea
</pre></div>
</div>
</div>
<div class="section" id="other-commands-you-need-to-know">
<h2>Other commands you need to know<a class="headerlink" href="#other-commands-you-need-to-know" title="Permalink to this headline">¶</a></h2>
<p>This tutorial gives you the basics on working with files on your own computer,
and on your own repository.</p>
<p>You will also need to know about:</p>
<ul class="simple">
<li><p>git remotes – <a class="reference internal" href="curious_remotes.html"><span class="doc">git remotes - working with other people, making backups</span></a>;</p></li>
<li><p>tags – making static bookmarks to commits;</p></li>
</ul>
<p>You will probably also find use for:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html">git reflog</a> –
show a list of previous commits that you have made;</p></li>
<li><p><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html">git rebase</a> –
rewrite the development history by altering or transplanting commits.  See
<a class="reference external" href="http://matthew-brett.github.io/pydagogue/foundation.html">rebase without tears</a>.</p></li>
</ul>
</div>
<div class="section" id="git-are-you-ready">
<h2>Git: are you ready?<a class="headerlink" href="#git-are-you-ready" title="Permalink to this headline">¶</a></h2>
<p>If you followed this tutorial, you now have a good knowledge of how git works.
This will make it much easier to understand why git commands do what they do,
and what to do when things go wrong.  You know all the main terms that the git
manual pages use, so git’s own help will be more useful to you.  You will
likely lead a long life of deep personal fulfillment.</p>
</div>
<div class="section" id="other-git-ish-things-to-read">
<h2>Other git-ish things to read<a class="headerlink" href="#other-git-ish-things-to-read" title="Permalink to this headline">¶</a></h2>
<p>As you’ve seen, this tutorial makes the bold assumption that you’ll be able to
understand how git works by seeing how it is <em>built</em>. These documents take a
similar approach to varying levels of detail:</p>
<ul class="simple">
<li><p>The <a class="reference external" href="http://tom.preston-werner.com/2009/05/19/the-git-parable.html">Git parable</a> by Tom
Preston-Werner;</p></li>
<li><p>The <a class="reference external" href="http://www.ralfebert.de/blog/tools/visual_git_tutorial_1">visual git tutorial</a> gives a nice
visual idea of git at work;</p></li>
<li><p><a class="reference external" href="http://www.sbf5.com/~cduan/technical/git">Understanding Git Conceptually</a> gives another review of how
the ideas behind git;</p></li>
<li><p>For more detail, see the start of the excellent <a class="reference external" href="http://progit.org/book">Pro Git</a> online book, or similarly the early parts of the
<a class="reference external" href="http://book.git-scm.com">Git community book</a>. Pro Git’s chapters are
very short and well illustrated; the community book tends to have more
detail and has nice screencasts at the end of some sections;</p></li>
<li><p><a class="reference external" href="http://matthew-brett.github.io/pydagogue/foundation.html">git foundation</a>;</p></li>
</ul>
<p>You might also try:</p>
<ul class="simple">
<li><p>For windows users, <a class="reference external" href="http://nathanj.github.com/gitguide/tour.html">an Illustrated Guide to Git on Windows</a> is useful in that it
contains also some information about handling SSH (necessary to interface
with git hosted on remote servers when collaborating) as well as screenshots
of the Windows interface.</p></li>
<li><p><a class="reference external" href="http://www.gitready.com">Git ready</a> A great website of posts on specific
git-related topics, organized by difficulty.</p></li>
<li><p><a class="reference external" href="http://sourceforge.net/projects/qgit/">QGit</a>: an excellent Git GUI Git
ships by default with gitk and git-gui, a pair of Tk graphical clients to
browse a repo and to operate in it. I personally have found <a class="reference external" href="http://sourceforge.net/projects/qgit/">qgit</a> to be nicer and easier to use. It
is available on modern Linux distros, and since it is based on Qt, it should
run on OSX and Windows.</p></li>
<li><p><a class="reference external" href="http://www-cs-students.stanford.edu/~blynn/gitmagic/index.html">Git Magic</a> : Another
book-size guide that has useful snippets.</p></li>
<li><p>The <a class="reference external" href="http://learn.github.com">learning center</a> at Github Guides on a
number of topics, some specific to github hosting but much of it of general
value.</p></li>
<li><p>A <a class="reference external" href="http://cworth.org/hgbook-git/tour">port</a> of the Hg book’s beginning
The <a class="reference external" href="http://hgbook.red-bean.com">Mercurial book</a> has a reputation for
clarity, so Carl Worth decided to <a class="reference external" href="http://cworth.org/hgbook-git/tour">port</a> its introductory chapter to Git. It’s
a nicely written intro, which is possible in good measure because of how
similar the underlying models of Hg and Git ultimately are.</p></li>
<li><p><a class="reference external" href="http://andyjeffries.co.uk/articles/25-tips-for-intermediate-git-users">Intermediate tips</a>: A
set of tips that contains some very valuable nuggets, once you’re past the
basics.</p></li>
</ul>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="delete-git-index"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>What would happen if we delete the <code class="docutils literal notranslate"><span class="pre">.git/index</span></code> file?
Remember, the <code class="docutils literal notranslate"><span class="pre">.git/index</span></code> file contains the directory listing for the
staging area.  If we delete the file, git will assume that the directory
listing is empty, and therefore that there are no files in the staging
area.</p>
</dd>
<dt class="label" id="no-parents"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>Why are the output of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">--parents</span></code>
the same in this case?  They are the same because this is the first commit,
and the first commit has no parents.</p>
</dd>
<dt class="label" id="git-object-dir"><span class="brackets"><a class="fn-backref" href="#id1">3</a></span></dt>
<dd><p>When git stores a file in the <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code> directory,
it makes a hash from the file, takes the first two digits of the hash to
make a directory name, and then stores a file in this directory with a
filename from the remaining hash digits.  For example, when adding a file
with hash <code class="docutils literal notranslate"><span class="pre">d92d079af6a7f276cc8d63dcf2549c03e7deb553</span></code> git will create
<code class="docutils literal notranslate"><span class="pre">.git/objects/d9</span></code> directory if it doesn’t exist, and stores the file
contents as <code class="docutils literal notranslate"><span class="pre">.git/objects/d9/2d079af6a7f276cc8d63dcf2549c03e7deb553</span></code>.  It
does this so that the number of files in any one directory stay in a
reasonable range.  If git had to store hash filenames for every object in
one flat directory, the directory would soon have a very large number of
files.</p>
</dd>
</dl>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2016 - Matthew Brett.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>