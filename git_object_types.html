<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Types of git objects &#8212; Curious git</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="An algorithm for git push" href="git_push_algorithm.html" />
    <link rel="prev" title="How do git submodules work?" href="git_submodules.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Curious git</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="curious_intro.html">Learn git right for a long and happy life</a></li>
<li class="toctree-l1"><a class="reference internal" href="curious_journey.html">A curious tale</a></li>
<li class="toctree-l1"><a class="reference internal" href="curious_git.html">Curious git</a></li>
<li class="toctree-l1"><a class="reference internal" href="curious_remotes.html">git remotes - working with other people, making backups</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="curious_details.html">Deeper inside git</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="curious_git.html">Curious git</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html">Curious git</a></li>
<li class="toctree-l1"><a class="reference internal" href="np-versions/README.html">np-versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdf_contents.html">The curious coder’s guide to git</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Types of git objects</a><ul>
<li><a class="reference internal" href="#commit-object-type">Commit object type</a></li>
<li><a class="reference internal" href="#tree-object-type">Tree object type</a></li>
<li><a class="reference internal" href="#blob-object-type">Blob object type</a></li>
<li><a class="reference internal" href="#tag-object-type">Tag object type</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="git_submodules.html" title="Previous Chapter: How do git submodules work?"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; How do git su...</span>
    </a>
  </li>
  <li>
    <a href="git_push_algorithm.html" title="Next Chapter: An algorithm for git push"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">An algorithm ... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/git_object_types.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="types-of-git-objects">
<span id="git-object-types"></span><h1>Types of git objects<a class="headerlink" href="#types-of-git-objects" title="Permalink to this headline">¶</a></h1>
<p>If you have read <a class="reference internal" href="curious_git.html"><span class="doc">Curious git</span></a>, you know that git stores different types
of objects in <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>.  The object types are:</p>
<ul class="simple">
<li><p><em>commit</em>;</p></li>
<li><p><em>tree</em>;</p></li>
<li><p><em>blob</em>;</p></li>
<li><p><em>annotated tag</em>.</p></li>
</ul>
<p>Here we make examples of each of these object types in a new repository.</p>
<p>First we make the working tree and initialize the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir example_repo
$ <span class="nb">cd</span> example_repo
$ git init
Initialized empty Git repository <span class="k">in</span> /Users/mb312/dev_trees/curious-git/working/example_repo/.git/
</pre></div>
</div>
<p>Next we make an example commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">echo</span> <span class="s2">&quot;An example file&quot;</span> &gt; example_file.txt
$ git add example_file.txt
$ git commit -m <span class="s2">&quot;An example commit&quot;</span>
<span class="o">[</span>main <span class="o">(</span>root-commit<span class="o">)</span> c3c31f1<span class="o">]</span> An example commit
 <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100644</span> example_file.txt
</pre></div>
</div>
<p>From <a class="reference internal" href="curious_git.html"><span class="doc">Curious git</span></a>, we expect there will now be three objects in the
directory <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>, one storing the backup of <code class="docutils literal notranslate"><span class="pre">example_file.txt</span></code>,
one storing the directory listing for the commit, and one storing the commit
message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>objects
├── 2f
│   └── 781156939ad540b2434d012446154321e41e03 [32B]
├── 83
│   └── 207f0274383b4a79ff6d6c297e95204ba961bc [60B]
├── c3
│   └── c31f13485ff3aecfba7550dd86b193b82d6131 [135B]
├── info
└── pack
</pre></div>
</div>
<section id="commit-object-type">
<h2>Commit object type<a class="headerlink" href="#commit-object-type" title="Permalink to this headline">¶</a></h2>
<p>The commit object contains the directory tree object hash, parent commit hash,
author, committer, date and message.</p>
<p>Git log will show us the hash for the commit message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git log
commit c3c31f13485ff3aecfba7550dd86b193b82d6131
Author: Matthew Brett &lt;matthew.brett@gmail.com&gt;
Date:   Sat Oct <span class="m">2</span> <span class="m">10</span>:25:52 <span class="m">2021</span> +0100

    An example commit
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I’ll use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span></code> to show the contents of the hashed files in
<code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>, but <code class="docutils literal notranslate"><span class="pre">cat-file</span></code> is a relatively obscure git command
that you will probably not need in your daily git work.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span> <span class="pre">-t</span></code> shows us the type of the object represented by a
particular hash:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -t c3c31f13485ff3aecfba7550dd86b193b82d6131
commit
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cat-file</span> <span class="pre">-p</span></code> shows the contents of the file associated with this hash:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p c3c31f13485ff3aecfba7550dd86b193b82d6131
tree 83207f0274383b4a79ff6d6c297e95204ba961bc
author Matthew Brett &lt;matthew.brett@gmail.com&gt; <span class="m">1633166752</span> +0100
committer Matthew Brett &lt;matthew.brett@gmail.com&gt; <span class="m">1633166752</span> +0100

An example commit
</pre></div>
</div>
</section>
<section id="tree-object-type">
<h2>Tree object type<a class="headerlink" href="#tree-object-type" title="Permalink to this headline">¶</a></h2>
<p>The commit contents gave us the hash of the directory listing for the
commit.  If we inspect this object, we find it is of type “tree” and contains
the directory listing for the commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -t 83207f0274383b4a79ff6d6c297e95204ba961bc
tree
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p 83207f0274383b4a79ff6d6c297e95204ba961bc
<span class="m">100644</span> blob 2f781156939ad540b2434d012446154321e41e03	example_file.txt
</pre></div>
</div>
<p>The tree object contains one line per file or subdirectory, with each line
giving file permissions, <em>object type</em>, object hash and filename.  <em>Object
type</em> is usually one of “blob” for a file or “tree” for a subdirectory
<a class="footnote-reference brackets" href="#directory-tree-types" id="id1">1</a>.</p>
</section>
<section id="blob-object-type">
<h2>Blob object type<a class="headerlink" href="#blob-object-type" title="Permalink to this headline">¶</a></h2>
<p>The directory listing gave us the hash of the stored of <code class="docutils literal notranslate"><span class="pre">example_file.txt</span></code>.
This object is of type “blob” and contains the file snapshot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -t 2f781156939ad540b2434d012446154321e41e03
blob
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p 2f781156939ad540b2434d012446154321e41e03
An example file
</pre></div>
</div>
<p><em>Blob</em> is an abbreviation for “binary large object”.  When we <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> a
file such as <code class="docutils literal notranslate"><span class="pre">example_file.txt</span></code>, git creates a <em>blob</em> object containing the
contents of the file.  Blobs are therefore the git object type for storing
files.</p>
</section>
<section id="tag-object-type">
<h2>Tag object type<a class="headerlink" href="#tag-object-type" title="Permalink to this headline">¶</a></h2>
<p>There is also a git type for annotated tags.  We don’t have one of those yet,
so let’s make one:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git tag -a first-commit -m <span class="s2">&quot;Tag pointing to first commit&quot;</span>
</pre></div>
</div>
<p>This gives us a new object in <code class="docutils literal notranslate"><span class="pre">.git/objects</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>objects
├── 2f
│   └── 781156939ad540b2434d012446154321e41e03 [32B]
├── 39
│   └── 2fbf08bc99b662867ac009b19eb032d56ab4c1 [146B]
├── 83
│   └── 207f0274383b4a79ff6d6c297e95204ba961bc [60B]
├── c3
│   └── c31f13485ff3aecfba7550dd86b193b82d6131 [135B]
├── info
└── pack
</pre></div>
</div>
<p>The object is of type “tag”:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -t 392fbf08bc99b662867ac009b19eb032d56ab4c1
tag
</pre></div>
</div>
<p>The tag object type contains the hash of the tagged object, the type of tagged
object (usually a commit), the tag name, author, date and message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git cat-file -p 392fbf08bc99b662867ac009b19eb032d56ab4c1
object c3c31f13485ff3aecfba7550dd86b193b82d6131
<span class="nb">type</span> commit
tag first-commit
tagger Matthew Brett &lt;matthew.brett@gmail.com&gt; <span class="m">1633166752</span> +0100

Tag pointing to first commit
</pre></div>
</div>
<p>Notice that the “object” the tag points to, via its hash, is the commit
object, as we were expecting.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="directory-tree-types"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>The object types in a directory listing are almost
invariably either “blob” or “tree”, but can also be “commit” for recording
the commit of a git submodule - see <a class="reference internal" href="git_submodules.html"><span class="doc">How do git submodules work?</span></a>.</p>
</dd>
</dl>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2016 - Matthew Brett.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>